(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{140:function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var a=function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=function(){return/zh/i.test(navigator.language)},i=function(){var e=window.imToken;return e&&e.version},c=function(){var e=navigator.userAgent,t=/micromessenger\/([\d.]+)/i.test(e),n=/qq\/([\d.]+)/i.test(e);return t||n},o=function(){var e=navigator.userAgent;return/android/i.test(e)},s=function(){var e=navigator.userAgent;return/chrome\/[\d.]+ Mobile Safari\/[\d.]+/i.test(e)},l=function(e){location.href=e},u=function(e){var t=document.createElement("iframe");t.src=e,t.style.display="none",document.body.appendChild(t)},d=function(e){var t=document.createElement("a");t.setAttribute("href",e),t.style.display="none",document.body.appendChild(t),t.click()},p={position:"fixed",zIndex:9999,bottom:"25px",left:"50%",transform:"translateX(-50%)",background:"#0890BE",boxShadow:"0px 6px 8px rgba(22, 21, 60, 0.2)",borderRadius:"50px",padding:"14px 28px",fontSize:"15px",color:"#fff",borderStyle:"none",outline:"none",fontFamily:"sans-serif"},f=function(){return{schemeUrl:"imtokenv2://navigate/DappView",fallbackUrl:"https://token.im/download",buttonStyle:/iphone/gi.test(navigator.userAgent)&&screen.height>=812?a({},p,{bottom:"59px"}):p,buttonText:r?"打开 imToken":"Open in imToken",timeout:2e3}},m=function(){function e(e){var t=this;void 0===e&&(e={}),this.showTip=function(){t.tip.style.display="block"},this.hideTip=function(){t.tip.style.display="none"},this.open=function(){if(!i())if(c())t.showTip();else{var e=t.props.schemeUrl+"?url="+location.href;o()?s()?d(e):u(e):l(e),t._checkOpen()}},this.fallback=function(){var e=t.props.fallbackUrl;location.href=e+"?from=open-app"},this._checkOpen=function(){var e=!1,n="hidden",a="visibilitychange";void 0!==document.hidden?(n="hidden",a="visibilitychange"):void 0!==document.msHidden?(n="msHidden",a="msvisibilitychange"):void 0!==document.webkitHidden&&(n="webkitHidden",a="webkitvisibilitychange");var r=function(a){e=!0,document[n]||a.hidden||"hidden"===document.visibilityState||t.fallback(),i()},i=function(){document.removeEventListener(a,r),document.removeEventListener("baiduboxappvisibilitychange",r)};document.addEventListener(a,r,!1),document.addEventListener("baiduboxappvisibilitychange",r,!1),clearTimeout(t.timer),t.timer=setTimeout(function(){e||(i(),t.fallback(),e=!0)},t.props.timeout)};var n=f();this.props=a({},n,e),this.render()}return e.prototype.render=function(){var e;i()||(o()||(e=navigator.userAgent,/iphone|ipad|ipod/i.test(e)))&&(this.renderButton(),this.renderTip())},e.prototype.renderButton=function(){var e=this.props,t=e.buttonStyle,n=e.buttonText,a=document.createElement("button");a.innerHTML=n,Object.keys(t).forEach(function(e){a.style[e]=t[e]}),document.getElementsByTagName("body")[0].appendChild(a),a.addEventListener("click",this.open)},e.prototype.renderTip=function(){this.tip=document.createElement("div");var e=r?"1. 点击更多":"1. Click More",t=r?"2. 请选择「在浏览器中打开」":"2. Choose “Open in Browser”",n="\n      font-size: 17px;\n      line-height: 17px;\n      text-align: center;\n      color: #fff;\n      margin-top: 16px;\n    ";this.tip.innerHTML='\n      <div style="\n      position: fixed;\n      z-index: 10000;\n      top: 0;\n      right: 0;\n      left: 0;\n      bottom: 0;\n      background-color: rgba(35, 33, 71, 0.8);\n    ">\n        <img style="\n      position: absolute;\n      top: -16px;\n      right: 6px;\n    " src="https://cdn.whale.token.im/open-app/oa-arrow-click.svg" alt="arrow" />\n        <div style="\n      position: absolute;\n      top: 70px;\n      right: 130px;\n      text-align: center;\n    ">\n          <img src="https://cdn.whale.token.im/open-app/oa-more.svg" alt="more" />\n          <div style="'+n+'">'+e+'</div>\n        </div>\n        <img style="\n      position: absolute;\n      top: 94px;\n      right: 194px;\n    " src="https://cdn.whale.token.im/open-app/oa-arrow-open.svg" alt="arrow" />\n        <div style="\n      position: absolute;\n      top: 195px;\n      right: 60px;\n      text-align: center;\n    ">\n          <img src="https://cdn.whale.token.im/open-app/oa-browser.svg" alt="arrow" />\n          <div style="'+n+'">'+t+"</div>\n        </div>\n      </div>\n    ",this.tip.style.display="none",document.getElementsByTagName("body")[0].appendChild(this.tip),this.tip.addEventListener("click",this.hideTip)},e}();t.a=m},2220:function(e,t,n){__NEXT_REGISTER_PAGE("/lon/records",function(){return e.exports=n(2221),{page:e.exports.default}})},2221:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(0),c=n.n(i),o=n(39),s=n(1),l=n(44),u=n.n(l),d=(n(2222),n(63)),p=n(85),f=n(62),m=n.n(f),v=n(25),h=n(27),b=n(75),y=n(76),w=n(140);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n,a,r,i,c){try{var o=e[i](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(a,r)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){E(i,a,r,c,o,"next",e)}function o(e){E(i,a,r,c,o,"throw",e)}c(void 0)})}}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;return j(e)}(this,n)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,i["Component"]);var t,n,a,o=N(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),T(j(t=o.call(this,e)),"initWeb3",k(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(d.a.METAMASK);case 3:(n=e.sent).length&&(t.setState({connected:!1}),t.fetchRecords(n[0])),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.setState({connected:!1}),h.a.error(Object(s.a)("please_open_in_imtoken"));case 11:case"end":return e.stop()}},e,null,[[0,7]])}))),T(j(t),"fetchRecords",function(){var e=k(r.a.mark(function e(n){var a,i,c,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.d)(n);case 3:return a=e.sent,i=a.data.code,e.next=7,Object(p.g)(i);case 7:return c=e.sent,e.next=10,Object(p.e)(i);case 10:o=e.sent,t.setState({rewardRecords:c.data,invitationRecords:o.data}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()),t.state={activeIndex:0,rewardRecords:[],invitationRecords:null,connected:!1},t}return t=l,(n=[{key:"componentDidMount",value:function(){this.initWeb3();var e=document.getElementsByTagName("html");e&&e.length&&(e[0].style.background="#20203D");var t=document.getElementsByTagName("body");t&&t.length&&(t[0].style.background="#20203D");new w.a({})}},{key:"render",value:function(){var e=this,t=this.state.activeIndex;return c.a.createElement("div",{className:"lon-wrap"},c.a.createElement("div",{className:"exchange-header-wrap"},c.a.createElement(b.a,null)),c.a.createElement("div",{className:"lon-records"},c.a.createElement(u.a,null,c.a.createElement("title",null,Object(s.a)("reward_record")),c.a.createElement("meta",{name:"description",content:Object(s.a)("description")}),c.a.createElement("meta",{name:"keywords",content:Object(s.a)("keywords")}),c.a.createElement("meta",{name:"generator",content:Object(s.a)("generator")})),c.a.createElement("div",{className:"tabs"},c.a.createElement("p",{className:0===t?"active":"",onClick:function(){return e.setState({activeIndex:0})}},Object(s.a)("reward_record")),c.a.createElement("p",{className:1===t?"active":"",onClick:function(){return e.setState({activeIndex:1})}},Object(s.a)("invitation_record"))),c.a.createElement("div",{className:"list-wrap"},0===t?this.renderRewardRecord():this.renderInvitationRecord())),c.a.createElement("div",{className:"footer-wrap"},c.a.createElement(y.a,null)))}},{key:"renderRewardRecord",value:function(){var e=this.state.rewardRecords;return c.a.createElement("div",null,c.a.createElement("div",{className:"sum-board"},c.a.createElement("div",{className:"col"},c.a.createElement("p",{className:"key"},Object(s.a)("status")),c.a.createElement("p",{className:"value"},Object(s.a)("waiting_drop"))),c.a.createElement("div",{className:"col"},c.a.createElement("p",{className:"key",style:{textAlign:"right"}},Object(s.a)("claim_time")),c.a.createElement("p",{className:"value"},"2020-12-30"))),c.a.createElement("div",{className:"record-list card-list"},c.a.createElement("div",{className:"row-li list-head"},c.a.createElement("span",null,Object(s.a)("weekly_reward")),c.a.createElement("span",null,Object(s.a)("reward_thead_power"))),e.map(function(e,t){return c.a.createElement("div",{className:"row-li list-body",key:t},c.a.createElement("div",null,c.a.createElement("p",{className:e.settled?"li-volume":"li-status"},e.settled?"".concat(Object(v.f)(e.lon)," LON"):Object(s.a)("waiting_calc")),c.a.createElement("p",{className:"li-date"},m()(e.period).format("YYYY.MM.DD"))),c.a.createElement("div",null,c.a.createElement("p",{className:"li-share"},Object(v.f)(e.power)),c.a.createElement("p",{className:"li-share-rate"},Object(v.g)(e.powerRatio))))})))}},{key:"renderInvitationRecord",value:function(){var e=this.state.invitationRecords;if(!e||!e.data)return null;var t=e.holdTFT?e.activated>0:e.activated>=3,n=0;return t&&(e.data||[]).map(function(e){n+=e.issued}),c.a.createElement("div",null,c.a.createElement("div",{className:"sum-board"},c.a.createElement("div",{className:"col"},c.a.createElement("p",{className:"key"},Object(s.a)("status")),c.a.createElement("p",{className:"value"},t?Object(s.a)("activated"):Object(s.a)("activating"))),c.a.createElement("div",{className:"col"},c.a.createElement("p",{className:"key"},Object(s.a)("friends_count")),c.a.createElement("p",{className:"value"},e.activated)),c.a.createElement("div",{className:"col"},c.a.createElement("p",{className:"key"},Object(s.a)("reward_count")),c.a.createElement("p",{className:"value"},"".concat(n," LON")))),c.a.createElement("div",{className:"record-list card-list"},c.a.createElement("div",{className:"row-li list-head"},c.a.createElement("span",null,Object(s.a)("wallet_address")),c.a.createElement("span",null,Object(s.a)("reward_amount"))),(e?e.data:[]).map(function(e){return c.a.createElement("div",{className:"row-li list-body",key:e.address},c.a.createElement("div",null,c.a.createElement("p",{className:"li-address"},Object(v.a)(e.address)),c.a.createElement("p",{className:"li-state ".concat(e.state)},Object(s.a)("invitation_".concat(e.state)))),c.a.createElement("div",null,c.a.createElement("p",{className:"li-await"},Object(v.f)(e.issued)),c.a.createElement("p",{className:"li-share-rate"},"")))})))}}])&&x(t.prototype,n),a&&x(t,a),l}();t.default=Object(o.a)(R)},85:function(e,t,n){"use strict";n.d(t,"f",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return h});var a=n(2),r=n.n(a),i=n(24),c=n.n(i);function o(e,t,n,a,r,i,c){try{var o=e[i](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}var l=function(){if("undefined"!=typeof window){var e=window.location.host;if(e.includes(".dev.")||e.includes("localhost"))return"https://api.dev.tokenlon.im/v1";if(e.includes(".staging."))return"https://api.staging.tokenlon.im/v1"}return"https://api.tokenlon.im/v1"},u=function(){var e=s(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(l(),"/referral/pool")));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=s(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(l(),"/referral/pool/shares?address=").concat(t)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=s(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.post("".concat(l(),"/referral/code"),{address:t}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=s(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(l(),"/referral/invitations/").concat(t)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=s(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(l(),"/referral/rewards/").concat(t)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=s(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.get("".concat(l(),"/referral/code/").concat(t)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=s(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.post("".concat(l(),"/referral/code/").concat(t),n));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}},[[2220,0,1,2]]]);